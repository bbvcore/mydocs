---
sidebar_position: 1
title: JTR
---

# John
Se puede instalar desde repositorio o clonar desde GitHub (y luego compilarlo).
```bash
sudo apt install john
```
Hay que tener en cuenta que existen 2 versiones de john, la lite y la jumbo, y eso es crucial en el manejo de contraseñas. También hay que tener en cuenta que depende de la versión john puede tener comportamientos extraños realizando modificaciones en los hallazgos, esto lo comento por si a veces los resultados no son los buscados.

## Caso de uso
Generar un hash para que John The Ripper lo pueda descifrar.
### Creación del mismo con OpenSSL
Con openssl se pueden crear hashes con salt y sin salt, en este caso crearemos uno sin salt.
```bash
openssl passwd -5 <clave_a_usar> > fichero.txt
```
De esta forma se ha obtenido un hash tipo SHA256crypt, sin problemas, sin crudo ni nada por el estilo que complique luego su labor descifrando.

### Diccionario
Para que el proceso sea más rápido y no solo fuerza bruta, se puede proporcionar un diccionario, en este caso crearemos un fichero txt a modo de diccionario donde daremos varias contraseñas entre ellas la auténtica.

### Descifrar el hash
```bash
john --wordlist=diccionario.txt fichero.txt
```
### Ejemplo completo
```bash
admin@admin-cross:~/john/run$ openssl passwd -5 tony_stark > user-tony.txt
admin@admin-cross:~/john/run$ cat user-tony.txt 
$5$iqJEdDH.4cXEGw1l$jvx2ne.BRNpP1/VuwtuRkAWJQz8jzS0jKAuWcLkwy65
admin@admin-cross:~/john/run$ sudo nano diccionario.txt # Rellenar el diccionario de claves
admin@admin-cross:~/john/run$ ./john --wordlist=diccionario.txt user-tony.txt 
```
Y se obtiene el resultado esperado
```bash
Using default input encoding: UTF-8
Loaded 1 password hash (sha256crypt, crypt(3) $5$ [SHA256 128/128 SSE4.1 4x])
Cost 1 (iteration count) is 5000 for all loaded hashes
Will run 4 OpenMP threads
Note: Passwords longer than 11 [worst case UTF-8] to 35 [ASCII] rejected
Press 'q' or Ctrl-C to abort, 'h' for help, almost any other key for status
Warning: Only 4 candidates buffered, minimum 16 needed for performance.
tony_stark       (?)     
1g 0:00:00:00 DONE (2025-07-17 09:21) 100.0g/s 400.0p/s 400.0c/s 400.0C/s tony_stark..casa
```
Esta contraseña del ejemplo es complicada sin un diccionario que tenga estos datos, el guión bajo complica la desencriptación, por ello o se da el diccionario o se hace más fácil, y he pensado en hacerlo más fácil logrando el password con la suma de dos hashes: hash1_hash2

```bash
openssl passwd -5 tony > hashts1.txt
openssl passwd -5 start > hashts2.txt

./john --show hashts1.txt
./john --show hashts2.txt

openssl passwd -5 Dr > hashts1.txt
openssl passwd -5 D00M > hashts2.txt

./john --wordlist=diccionario.txt hashdd1.txt
./john --wordlist=diccionario.txt hashdd1.txt
```
Hay que proporcionar un diccionario para que se saque rápido la segunda, si no se complica.


## Utilidades compatibles de JTR
Existen utilidades de JTR para utilizar cuando no se trabaja con hashes clásicos como son las siguientes.
- zip: uso de zip2john
- rar: uso de rar2john
- pdf: uso de pdf2john.pl
- docx: uso de office2john.py

### Caso de uso con un directorio Zip
echo "Texto a proteger" > pass.txt
zip -e pass.zip pass.txt # -e de encrypt pide una contraseña
zip2john pass.zip > pass.hash
john pass.hash --wordlist=/usr/share/wordlists/rockyou.txt
